<!DOCTYPE html>
<html>
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<meta name="viewport" content="width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0;" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
      window.URL = window.URL || window.webkitURL;
      $("#stopButton").hide();
      $("#startButton").hide();

      $("#uploadButton").click(function(e) {
          e.preventDefault();
          $("#fileChoose0").click();
      });

      $("#fileChoose0").live('change', function() {
         var req = new XMLHttpRequest();
         req.open("POST", "uppp.php", true);
         req.onload = function(event) { 
            if (req.readyState === 4) {  
               if (req.status === 200) {  
                  console.log(req.responseText);
                  var au = document.getElementById('audio1');
                  au.src = req.responseText;
                  au.load();
                  au.play();
                  $("#stopButton").show();
                  $("#startButton").show();
               } else {  
                  console.log("Error", req.statusText);  
               }  
            }  
         };
         var fd = new FormData(document.forms.namedItem("uploadForm")); 
         req.send(fd);
      });

      $("#stopButton").click(function(e) {
          e.preventDefault();
          document.getElementById('audio1').pause();
      });

      $("#startButton").click(function(e) {
          e.preventDefault();
          document.getElementById('audio1').play();
      });

      $("#cameraButton").click(function(e) {
          alert("Not implemented yet");
      });
});
</script>

<title>Mobile Bitmaps and Waves</title> 
</head> 
 
<body>
<audio id="audio1" preload="auto">AUDIO</audio>
<form id="uploadFormPost" name="uploadForm" enctype="multipart/form-data" action="uppp.php" method="POST" data-ajax='false'>
<input type="hidden" name="MAX_FILE_SIZE" value="2000000" />
<input type="file" id="fileChoose0" name="uploadedfile" multiple="false" accept="image/jpeg" style="height:0;width:0;"/>

<a id="uploadButton" data-icon="arrow-u" data-inline="true" data-role="button" data-theme="b" data-iconpos="left">Upload an Image File</a>
<!--a id="cameraButton" data-inline="true" data-role="button" data-theme="b" data-iconpos="left">Take a Picture</a -->
<a id="startButton" data-icon="arrow-r" data-inline="true" data-role="button" data-theme="b" data-iconpos="left">Play</a>
<a id="stopButton" data-icon="gear" data-inline="true" data-role="button" data-theme="b" data-iconpos="left">Stop</a>
</form>
</body>
</html>
